---
title: "Bellabeat Case Study"
author: "Jessica Y. Yang"
date: "`r Sys.Date()`"
output:
  word_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
 
## What is Bellabeat?
Bellabeat is a high-tech manufacturer that focuses on health products for women. Bellabeat produces products that collect data on activity, sleep, stress, and reproductive health and has empowered women with knowledge about their own health and habits throughout the years. 

## Bellabeat's Products
Bellabeat has 5 main products: Bellabeat app, Leaf, Time, Spring, and the Bellabeat membership. 

* Bellabeat app: It has health data that is related to one's activity, sleep cycle, stress levels, menstrual cycle, and mindfulness habits. This application can connect to the line of smart wellness products that Bellabeat has created.

* Leaf: This is a wellness tracker and can be worn as a bracelet, necklace, or clip. It tracks activity, sleep cycle, and stress levels. 

* Time: This is a wellness watch. It tracks activity, sleep cycle, and stress levels.

* Spring: This is a wellness water bottle. It tracks the daily water intake and hydration levels using smart technology to ensure that users are appropriately hydrated throughout the day. 

* Bellabeat membership: Apart from all these products listed above, Bellabeat also offers subscription-based membership program that gives users 24/7 access to fully personalized guidance on nutrition, activity, sleep cycle, health and beauty tips, and mindfulness based on users' lifestyles and goals.

## Three Main Questions
These are the three main questions that will guide the future marketing program:

* What are some trends in smart device usage?
* How could theses trends apply to Bellabeat customers?
* How could these trends help influence Bellabeat marketing strategy?

## Bellabeat's Current Marketing Strategies
Bellabeat currently has invested in several different media outlets to gain more users. Bellabeat has invested in traditional advertising media, such as radio, out-of-home billboards, print, and television, but focuses on digital marketing extensively. The company invests year-round in Google Search and maintains active Facebook and Instagram pages, and consistently engages consumers on Twitter. It also runs video advertisements on Youtube and display its advertisements on the Google Display Network to support campaigns around key marketing dates and to increase customer retention. 

##Ask

The business task

* The business task is to find trends in user's data and improve Bellabeat customer's user experiences.
  
Key stakeholders

* Urska Srsen (Bellabeat's Cofounder and Chief Creative Officer)
* Sando Mur (Mathematician and Bellabeat's Cofounder, a key member of the Bellabeat executive team)
* Bellabeat marketing analytics team
  
##Prepare

About the dataset

* The [dataset](https://www.kaggle.com/datasets/arashnic/fitbit?resource=download) used in this analysis is the FitBit Fitness Tracker Data made available by Mobius stored on Kaggle. The dataset is under CC0: Public Domain license, which means the creator has to waive all his rights to the work worldwide under the copyright law.
* The dataset is generated by respondents to a distributed survey via Amazon Mechanical Turk.
* There are 30 eligible FitBit users consented to the submission of personal tracker data.

Import the data
```{r Install Packages}
##I installed these packages.
install.packages("tidyverse", repos = "http://cran.us.r-project.org")
install.packages("janitor", repos = "http://cran.us.r-project.org")

##I loaded these packages.
library(tidyverse) 
library(readr)
library(ggplot2)
library(readxl) 
library(dplyr)
library(lubridate)
library(janitor)
```
```{r Import Data}
##-----Import Data with readr-----
daily_activity <- read_csv("C:/Users/Admin/Desktop/Data Analytics Certification/Bellabeat Case Study/archive/Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
daily_calories <- read_csv("C:/Users/Admin/Desktop/Data Analytics Certification/Bellabeat Case Study/archive/Fitabase Data 4.12.16-5.12.16/dailyCalories_merged.csv")
daily_steps <- read_csv("C:/Users/Admin/Desktop/Data Analytics Certification/Bellabeat Case Study/archive/Fitabase Data 4.12.16-5.12.16/dailySteps_merged.csv")
daily_intensities <- read_csv("C:/Users/Admin/Desktop/Data Analytics Certification/Bellabeat Case Study/archive/Fitabase Data 4.12.16-5.12.16/dailyIntensities_merged.csv")
daily_sleep <- read_csv("C:/Users/Admin/Desktop/Data Analytics Certification/Bellabeat Case Study/archive/Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
weight_log <- read_csv("C:/Users/Admin/Desktop/Data Analytics Certification/Bellabeat Case Study/archive/Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
```
ROCCC Analysis

* Reliable -- LOW -- the data set was collected from 30 individuals where gender is unknown. The data does not seem complete at all. 
* Originality -- LOW -- the data set is a third party data collected using Amazon Mechanical Turk.
* Comprehensive -- MEDIUM -- the data set contains multiple fields on daily activity, calories used, daily steps taken, daily sleep time, and daily weight record. 
* Current -- MEDIUM -- the data set is roughly 7 years old but the way people live do not change drastically over the years.
* Cited -- HIGH -- the data source is very well documented.

Find Column Names and the Number of Distinct IDs
```{r Look At Column Names}
##-----Find Column Names-----
colnames(daily_activity)
colnames(daily_steps)
colnames(daily_sleep)
colnames(weight_log)
```
```{r Rename Column Names}
daily_activity <- daily_activity %>%
  rename("Date" = "ActivityDate")
daily_calories <- daily_calories %>%
  rename("Date" = "ActivityDay")
daily_intensities <- daily_intensities %>%
  rename("Date" = "ActivityDay")
daily_steps <- daily_steps %>%
  rename("Date" = "ActivityDay")
daily_sleep <- daily_sleep %>%
  rename("Date" = "SleepDay")
```

```{r Number of Distinct IDs}
##-----Number of Distinct IDs-----
n_distinct(daily_activity$Id)
n_distinct(daily_steps$Id)
n_distinct(daily_sleep$Id)
n_distinct(weight_log$Id)
```
There are only 8 participants for the weight log, I want to check if there are any significant weight changes.
```{r Looking at Weight Log Data}
##-----Check Weight Log Data if any Significant Data Change-----
weight_log %>%
  group_by(Id) %>%
  summarize(min(WeightKg), max(WeightKg))
```

## Process

Remove any empty rows and columns 
```{r Remove Empty}
daily_activity_cleaned <- daily_activity %>%
  remove_empty(which = c("rows")) %>%
  remove_empty(which = c("cols"))
daily_sleep_cleaned <- daily_sleep %>%
  remove_empty(which = c("rows")) %>%
  remove_empty(which = c("cols"))
daily_steps_cleaned <- daily_steps %>%
  remove_empty(which = c("rows")) %>%
  remove_empty(which = c("cols"))
weight_log_cleaned <- weight_log %>%
  remove_empty(which = c("rows")) %>%
  remove_empty(which = c("cols"))
```
There was no empty rows and columns removed. 

Change Date to as.Date
```{r Change to as.Date}
daily_activity_cleaned$Date <- as.Date(daily_activity_cleaned$Date, format = "%m/%d/%Y")
daily_sleep_cleaned$Date <- as.Date(daily_sleep_cleaned$Date, format = "%m/%d/%Y")
daily_steps_cleaned$Date <- as.Date(daily_steps_cleaned$Date, format = "%m/%d/%Y")
weight_log$Date <- as.Date(weight_log$Date, format = "%m/%d/%Y")
```

Summary statistics of the data sets used
```{r Summary Statistics}
##-----Summary of Daily Activity-----
daily_activity_cleaned %>%
  select(TotalSteps,
         TotalDistance,
         SedentaryMinutes,
         VeryActiveMinutes,
         Calories) %>%
  summary()
##-----Summary of Daily Sleep-----
daily_sleep_cleaned %>%
  select(TotalSleepRecords, 
         TotalMinutesAsleep,
         TotalTimeInBed) %>%
  summary()
##-----Summary of Daily Steps-----
daily_steps_cleaned %>%
  select(StepTotal) %>%
  summary()
##-----Summary of Weight Log-----
weight_log_cleaned %>%
  select(WeightKg,
         WeightPounds,
         BMI) %>%
  summary()
```

## Analyze & Share

```{r ggplot Total Time Asleep vs. Total Time in Bed}
##-----Total Time Asleep vs. Total Time in Bed (A Visualization)-----
ggplot(data = daily_sleep_cleaned, aes(x = TotalMinutesAsleep, y = TotalTimeInBed)) +
  geom_point() +
  labs(title = "Bellabeat: Total Minutes Asleep vs. Total Time in Bed", caption = "Visualization created by Jessica Y. Yang", x = "Total Minutes Asleep", y = "Total Time In Bed")
```

There is a positive correlation between total minutes asleep and total time in bed. This graphs shows that the more time someone spends in bed, the longer he/she is asleep for. 

```{r ggplot Total Steps vs. Sedentary Minutes with Calories as Legend}
##-----Total Steps vs. Sedentary Minutes with Calories as Legend-----
ggplot(data = daily_activity_cleaned, aes(x = TotalSteps, y = SedentaryMinutes, color = Calories)) +
  geom_point() +
  labs(title = "Bellabeat: Total Steps vs. Sedentary Minutes", subtitle = "How Much Calories Burned?", caption = "Visualization created by Jessica Y. Yang", x = "Total Steps", y = "Sedentary Minutes")
```

There is a negative correlation between total steps and sedentary minutes. The reason is because a person does not move if he/she is not active. As can be seen, it looks like sedentary minutes has no correlation with calories at all so I will plot a graph between calories and total steps to see the relationship instead. 

```{r ggplot Total Steps. vs. Calories}
##-----Total Steps vs. Calories-----
ggplot(data = daily_activity_cleaned, aes(x = TotalSteps, y = Calories)) +
  geom_point() +
  labs(title = "Bellabeat: Total Steps vs. Calories", caption = "Visualization created by Jessica Y. Yang", x = "Total Steps", y = "Calories Burned")
```

There is a positive correlation between total steps taken and calories burned. Now, I want to take a look at every user's hourly step count vs. hourly calories burned. 

```{r Daily Steps and Daily Calories by Each User}
##-----Total Steps vs. Total Calories by Each User-----
ggplot(data = daily_activity_cleaned, aes(x = Id, y = TotalSteps, color = Calories)) +
  geom_point() +
  labs(title = "Bellabeat: Number of Steps and Calories Burned by Each Individual", caption = "Visualization created by Jessica Y. Yang", x = "Id", y = "Total Steps")
```

As can be seen, the more steps someone takes the more calories burned. 

Now I want to find out if the day of the week affects activity and sleep levels.
```{r Aggregate Data by Day of Week}
##-----Merge Sleep and Daily Activity into a Data Frame-----
sleep_daily_activity <- merge(daily_activity_cleaned, daily_sleep_cleaned, by = c("Id", "Date"))
##-----Add New Variable "Awake Time"-----
sleep_daily_activity <- mutate(sleep_daily_activity, AwakeTime = TotalTimeInBed - TotalMinutesAsleep)
##-----Aggregate Data by Day of Week-----
sleep_daily_activity <- sleep_daily_activity %>%
  mutate(day_of_week = Date)
sleep_daily_activity$day_of_week <- as.Date(sleep_daily_activity$day_of_week, format = "%m/%d/%Y")
sleep_daily_activity$day_of_week <- wday(sleep_daily_activity$day_of_week, label = TRUE)
summarized_sleep_activity <- sleep_daily_activity %>%
  group_by(day_of_week) %>%
  summarize(average_daily_steps = mean(TotalSteps),
            average_sedentary_minutes = mean(SedentaryMinutes),
            average_minutes_asleep = mean(TotalMinutesAsleep),
            average_calories = mean(Calories),
            average_awake_time = mean(AwakeTime),
            average_very_active_minutes = mean(VeryActiveMinutes))
head(summarized_sleep_activity)
##-----Average Daily SAteps vs. Day of the Week-----
ggplot(data = summarized_sleep_activity, aes(x = day_of_week, y = average_daily_steps)) +
  geom_col(fill = "pink") +
  labs(title = "Day of the Week vs. Average Daily Step Count", caption = "Visualization created by Jessica Y. Yang", x = "Day of the Week", y = "Average Daily Steps")
```

As shown in the graph, on average, a person is most active on Saturday and least active on Sundays.

## Act

Final conclusion

* The more time someone spends in bed, the more time they are asleep. 
* The more sedentary minutes, the less steps taken. 
* The more steps taken, the more calories burnt. 
* A person is the most active on Saturdays and least active on Sundays. 
  
Top 3 recommendations

* Since people are less active on Sunday and less willingly to go out, Bellabeat can include some Sunday challenges in order to motivate more activity done.
* There is also not much data collected, so I will suggest collecting more data from different competitors so Bellabeat's marketing analytics team and see more trends in usage. 
* Since the gender is not revealed, I do not know whether or not the survey was catered towards females only. I suggest collecting data specifically on women using smart devices as Bellabeat focuses on health products for women. * Create a system where the Bellabeat app alerts the user when too much time is spend being sedentary and can assist them in moving and being more active. 